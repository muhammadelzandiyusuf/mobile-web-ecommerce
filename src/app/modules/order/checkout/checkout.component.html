<div class="checkout-cart">
    <div class="container">
        <div class="row" *ngIf="notLoad === false">
            <div class="col-12">
                <div class="header-checkout">
                    <mat-icon class="back-icon" (click)="backToCart()">keyboard_backspace</mat-icon>
                    <span>Checkout</span>
                </div>
            </div>
            <div class="col-12">
                <div class="load-gif">
                    <img src="/assets/images/load.gif" alt="load" />
                </div>
            </div>
        </div>
        <div class="row" *ngIf="notLoad === true">
            <div class="col-12">
                <div class="header-checkout">
                    <mat-icon class="back-icon" (click)="backToCart()">keyboard_backspace</mat-icon>
                    <span>Checkout</span>
                </div>
            </div>
            <div class="col-12">
                <div class="shipping-address">
                    <div class="header-text">
                        <mat-icon class="icon-checkout">location_on</mat-icon>
                        <span>{{ 'order.shipping_address' | translate }}</span> 
                    </div>
                    <div class="content-address" *ngIf="receiverName === null">
                        <div class="not-address">
                            {{ 'order.shipping_address_not_available' | translate }}
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <div class="addres-button">
                                    <button class="btn-shipping-address" (click)="addShippingAddress()">{{ 'order.add_new_address' | translate }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="content-address" *ngIf="receiverName !== null">
                        <div class="text-customer">{{ receiverName }} <span>({{ label }})</span></div>
                        <div class="text-address">{{ receiverPhone }}</div>
                        <div class="text-address">{{ address }}</div>
                        <div class="text-address">{{ province }}, {{ city }}, {{ subdistrict }}, {{ postalZip }}</div>
                        <div class="row">
                            <div class="col-6">
                                <div class="addres-button">
                                    <button class="btn-shipping-address" (click)="addShippingAddress()">{{ 'order.add_new_address' | translate }}</button>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="addres-button">
                                    <button class="btn-shipping-address" (click)="choseShippingAddress()">{{ 'order.choose_another_address' | translate }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12" *ngFor="let item of contents">
                <div class="cart-product">
                    <div class="row">
                        <div class="col-4">
                          <div class="image-prod">
                              <img src="{{ item.image }}">
                          </div>
                        </div>
                        <div class="col-8">
                            <div class="cart-brand">
                                <div class="name-brand">{{ item.brand }}</div>
                            </div>
                            <div class="cart-name-prod">{{ item.name }}</div>
                            <div class="cart-qauntity">
                                {{ item.quantity }} product ({{ item.weight }} gr)
                            </div>
                            <div class="cart-prod-price">{{ item.price | currency:'Rp':'true':'4.0-0' }}</div>
                            <div class="status-product" *ngIf="item.stock_status_id === 2">Pre Order</div>
                        </div>
                        <div class="col-12">
                            <div class="subtotal-text">
                                Sub total
                            </div>
                            <div class="subtotal-cart">
                                {{ item.subtotal | currency:'Rp':'true':'4.0-0' }}
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="col-12" *ngIf="item.selected_extended_warranty">
                            <div class="extended-warranty" *ngIf="lang === 'en'">
                                {{ 'order.extended_warranty' | translate }} {{ item.selected_extended_warranty.periode_english }} 
                                <span>( + {{ item.selected_extended_warranty.total | currency:'Rp':'true':'4.0-0' }} )</span>
                            </div>
                            <div class="extended-warranty" *ngIf="lang === 'id'">
                                {{ 'order.extended_warranty' | translate }} {{ item.selected_extended_warranty.periode_indonesia }} 
                                <span>( + {{ item.selected_extended_warranty.total | currency:'Rp':'true':'4.0-0' }} )</span>
                            </div>
                        </div>
                        <div class="col-12" *ngIf="item.selected_contract_service">
                            <div class="extended-warranty" *ngIf="lang === 'en'">
                                {{ 'order.contract_service' | translate }} {{ item.selected_contract_service.periode_english }} 
                                <span>( + {{ item.selected_contract_service.total | currency:'Rp':'true':'4.0-0' }} )</span>
                            </div>
                            <div class="extended-warranty" *ngIf="lang === 'id'">
                                {{ 'order.contract_service' | translate }} {{ item.selected_contract_service.periode_indonesia }} 
                                <span>( + {{ item.selected_contract_service.total | currency:'Rp':'true':'4.0-0' }} )</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="shipping-address">
                    <div class="header-text courir-box">
                        <i class="fas fa-info"></i> <span> {{ 'order.shipping_info' | translate }} </span> 
                    </div>
                    <div class="content-address">
                        <div class="row">
                            <div class="col-12">
                                <div class="shipping-info">
                                    <div class="text-address">1. {{ 'order.note_checkout_1' | translate }}</div>
                                    <div class="text-address">2. {{ 'order.note_checkout_2' | translate }}</div>
                                    <div class="text-address">3. {{ 'order.note_checkout_3' | translate }}
                                        <a href="https://m.kitchenart.id/terms_condition" target="_blank">
                                            {{ 'order.click_here' | translate }}
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="shipping-address">
                    <div class="header-text courir-box">
                        <fa name="truck" class="icon-truct"></fa>
                        <span>{{ 'order.shipping_courier' | translate }} </span> 
                    </div>
                    <div class="content-address">
                        <div class="row">
                            <div class="col-12">
                                <div class="not-address padding-not-available" *ngIf="receiverName === null">
                                    {{ 'order.shipping_courier_not_available' | translate }}
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="text-free-shipping" *ngIf="freeShipping === 'T'">
                                    {{ 'order.free_shipping' | translate }}
                                </div>
                                <div *ngIf="serviceCourier === null && freeShipping === 'F'">
                                    <button class="btn-courier" (click)="showCourier()">{{ 'order.choose_courier' | translate }}</button>
                                </div>
                            </div>
                            <div class="col-6" *ngIf="serviceCourier !== null">
                                <div class="text-courier">{{ courierName }} - {{ serviceCourierName }}</div>
                                <div class="text-etd">{{ serviceCourierEtd }} - {{ serviceCourierEtdEnd }} {{ 'order.day' | translate }}</div>
                                <div class="text-cost">{{ serviceCourierCost | currency:'Rp':'true':'4.0-0' }}</div>
                            </div>
                            <!-- <div class="col-6" *ngIf="serviceCourier !== null">
                                <div class="text-courier">{{ courierName }}</div>
                                <div class="text-cost">{{ serviceCourierCost | currency:'Rp':'true':'4.0-0' }}</div>
                            </div> -->
                            <div class="col-6" *ngIf="serviceCourier !== null">
                                <div class="button-courier">
                                    <button class="btn-courier" (click)="showCourier()">{{ 'order.change_courier' | translate }}</button>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="note-checkout">
                                    <mat-form-field class="example-full-width">
                                        <input matInput #message maxlength="256" [formControl]="notes" placeholder="{{ 'order.note' | translate }}">
                                        <mat-hint align="end">{{message.value.length}} / 256</mat-hint>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="col-12" *ngIf="insurancePrice !== 0">
                                <div class="text-summary">
                                    <mat-checkbox class="example-margin" [(ngModel)]="checkedInsurance" (click)="usingInsurance()">{{ 'order.insurance' | translate }} ({{ insurancePrice | currency:'Rp':'true':'4.0-0' }})</mat-checkbox>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="col-12">
                <div class="get-promo" (click)="getVoucherCoupon()" *ngIf="promoCode === null">
                    <mat-icon class="icon-giftcard" class="icon-ticket-voucher">card_giftcard</mat-icon>
                    {{ 'order.use_voucher_or_coupon' | translate }}
                </div>
                <div class="get-promo" *ngIf="promoCode !== null">
                    <div class="row">
                        <div class="col-10">
                            <div class="text-my-coupon promo-code">{{ promotion }} : <span>{{ promoCode }}</span></div>
                        </div>
                        <div class="col-2">
                            <div class="text-my-coupon clearing">
                                <mat-icon class="coupon-clear" (click)="notUseCoupon()">clear</mat-icon>
                            </div>
                        </div>
                    </div>
                    <div class="text-my-coupon">{{ messagePromo }}</div>
                </div>
            </div>
            <div class="col-12">
                <div class="get-promo" (click)="paymentMethod()" *ngIf="payMethod === false">
                    {{ 'order.payment_method' | translate }}
                </div>
                <div class="get-promo" (click)="paymentMethod()" *ngIf="payMethod === true">
                    {{ 'order.payment_method' | translate }} / {{ paymentName }}
                </div>
            </div> -->
            <div class="col-12">
                <div class="shipping-address shopping-summary">
                    <div class="header-text courir-box">
                        {{ 'order.shopping_summary' | translate }}
                    </div>
                    <div class="content-address">
                        <div class="row">
                            <div class="col-6">
                                <div class="text-summary">
                                    {{ 'order.total_price' | translate }} ({{ totalItems }} Product)
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="text-summary right">
                                    {{ total | currency:'Rp':'true':'4.0-0' }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="content-address shipping-summary" *ngIf="totalDiscount !== 0">
                        <div class="row">
                            <div class="col-6">
                                <div class="text-summary">
                                    {{ 'order.total_discount' | translate }}
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="text-summary right kitchenart-color">
                                    - {{ totalDiscount | currency:'Rp':'true':'4.0-0' }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="content-address shipping-summary" *ngIf="serviceCourierCost !== null">
                        <div class="row">
                            <div class="col-6">
                                <div class="text-summary">
                                    {{ 'order.shipping_cost' | translate }}
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="text-summary right" *ngIf="freeShipping === 'F'">
                                    {{ serviceCourierCost | currency:'Rp':'true':'4.0-0' }}
                                </div>
                                <div class="text-summary right" *ngIf="freeShipping === 'T'">
                                    Rp 0
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="content-address shipping-summary" *ngIf="balance !== 0">
                        <div class="row">
                            <div class="col-6">
                                <div class="text-summary">
                                    <mat-checkbox class="example-margin" [(ngModel)]="checked" (click)="usingBalance()">{{ 'order.use_balance' | translate }}</mat-checkbox>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="text-summary right kitchenart-color">
                                    - {{ balance | currency:'Rp':'true':'4.0-0' }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="content-address shipping-summary" *ngIf="useInsurance !== 'F'">
                        <div class="row">
                            <div class="col-6">
                                <div class="text-summary">
                                    {{ 'order.insurance' | translate }}
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="text-summary right kitchenart-color">
                                    {{ insurancePrice | currency:'Rp':'true':'4.0-0' }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="box-total-payment">
                    <div class="row">
                        <div class="col-12">
                            <div class="get-promo voucher-button-check" (click)="getVoucherCoupon()" *ngIf="promoCode === null">
                                <mat-icon class="icon-giftcard" class="icon-ticket-voucher">card_giftcard</mat-icon>
                                {{ 'order.use_voucher_or_coupon' | translate }}
                            </div>
                            <div class="get-promo voucher-button-check" *ngIf="promoCode !== null">
                                <div class="row">
                                    <div class="col-10">
                                        <div class="text-my-coupon promo-code">{{ promotion }} : <span>{{ promoCode }}</span></div>
                                    </div>
                                    <div class="col-2">
                                        <div class="text-my-coupon clearing">
                                            <mat-icon class="coupon-clear" (click)="notUseCoupon()">clear</mat-icon>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-my-coupon">{{ messagePromo }}</div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="get-promo voucher-button-check" (click)="paymentMethod()" *ngIf="payMethod === false">
                                {{ 'order.payment_method' | translate }}
                            </div>
                            <div class="get-promo voucher-button-check" (click)="paymentMethod()" *ngIf="payMethod === true">
                                {{ 'order.payment_method' | translate }} / {{ paymentName }}
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="text-total-payment">
                                {{ 'order.total_payment' | translate }}
                            </div>
                            <div class="text-payment" *ngIf="totalPayment !== 0">
                                {{ totalPayment | currency:'Rp':'true':'4.0-0' }}
                            </div>
                            <div class="text-payment" *ngIf="totalPayment === 0">
                                -
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="button-payment">
                                <button mat-raised-button color="action" (click)="payment()">{{ 'order.payment' | translate }}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="overlay-courier" *ngIf="courierStatus">
    <div class="box-courier">
        <div class="header-courier">
            <mat-icon class="back-icon" (click)="closeCourier()">clear</mat-icon>
            <span>{{ 'order.courier' | translate }}</span>
        </div>
        <div class="content-courier" *ngIf="services.length === 0">
            <div class="row">
                <div class="col-12">
                    <div class="text-courier">{{  'account.not_found_postal_code' | translate }}</div>
                </div>
            </div>
        </div>
        <div class="content-courier" *ngFor="let item of services; let i = index" (click)="chooseCourier(i)">
            <div class="row">
                <div class="col-6">
                    <div class="text-courier">{{ courierName }} - {{  item.service_display }}</div>
                    <div class="text-etd">{{  item.etd_from }} - {{  item.etd_thru }} Day</div>
                    <div class="text-cost">
                        {{  item.total_price | currency:'Rp':'true':'4.0-0' }}
                        <span> {{  item.price | currency:'Rp':'true':'4.0-0' }}</span>
                    </div>
                </div>
                <!-- <div class="col-6">
                    <div class="text-courier">{{ courierName }}</div>
                    <div class="text-cost">{{  item.cost | currency:'Rp':'true':'4.0-0' }}</div>
                </div> -->
                <div class="col-6">
                    <div class="courier-active" *ngIf="i === courierId">
                        <mat-icon class="icon-courier">done</mat-icon>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="checkout-loading" *ngIf="cekCourier">
    <div class="loading-io">
        <img src="assets/images/loading.gif">
        <span>Loading ...</span>
    </div>
</div>
<div class="overlay-checkout-voucher" *ngIf="voucherCoupon">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="header-checkout-voucher">
                    <mat-icon class="back-icon" (click)="closeVoucherCoupon()">keyboard_backspace</mat-icon>
                    <span>{{ 'order.coupon_voucher' | translate }}</span>
                </div>
            </div>
            <div class="content-voucher">
                <mat-tab-group class="tab-coupon">
                    <mat-tab label="{{ 'order.my_voucher' | translate }}">
                        <div class="not-found-viucher" *ngIf="vouchers === null">
                            {{ 'order.not_found_voucher' | translate }}
                        </div>
                        <div class="ticket-content" *ngFor="let voucher of vouchers" (click)="usePromoVoucher(voucher.id)">
                            <div class="row">
                                <div class="col-3">
                                    <div class="icon-ticket">
                                        <mat-icon class="icon-giftcard">card_giftcard</mat-icon>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <div class="content-voucher-ticket">
                                        <div class="voucher-name">{{ voucher.name }}</div>
                                        <div class="voucher-description" [innerHtml]="voucher.highlight_english"></div>
                                        <div class="time-date">
                                            <mat-icon class="icon-date-time">access_time</mat-icon>
                                            Valid until : <span>{{ voucher.date_end | date:'dd MMMM yyyy' }}</span>
                                        </div>
                                        <div class="not-voucher" *ngIf="messageError !== null && promotion === 'voucher' && codeVoucher === voucher.id">
                                            *{{ messageError }}
                                        </div>
                                        <div class="btn-vocuher-use">
                                            <button mat-raised-button class="full-width" color="action">{{ 'account.use_voucher' | translate }}</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </mat-tab>
                    <mat-tab label="{{ 'order.coupon' | translate }}">
                        <div class="content-coupon">
                            <mat-form-field class="full-width">
                                <input matInput placeholder="{{ 'order.insert_code_coupon' | translate }}" [formControl]="codeCoupon">
                            </mat-form-field>
                        </div>
                        <div class="not-coupon-box" *ngIf="messageError !== null && promotion === 'coupon'">
                            <div class="not-coupon">
                                *{{ messageError }}
                            </div>
                        </div>
                        <div class="button-coupon">
                            <button mat-raised-button class="full-width" color="action" (click)="usePromoCopon()">{{ 'order.use_code' | translate }}</button>
                        </div>
                  </mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </div>
</div>
<div class="overlay-checkout-voucher" *ngIf="showPayment">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="header-checkout-voucher">
                    <mat-icon class="back-icon" (click)="closePaymentMethod()">keyboard_backspace</mat-icon>
                    <span>{{ 'order.payment_method' | translate }}</span>
                </div>
            </div>
            <div class="col-12">
                <div class="payment-method-channel">
                    <mat-accordion>
                        <mat-expansion-panel *ngIf="creditCards.length > 0">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Credit Card / Debit
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            
                            <div class="container">
                                <div class="row">
                                    <div class="col-12" *ngFor="let credit of creditCards" (click)="chossePayment(credit.id, credit.name, credit.cc)">
                                        <div class="list-payment">
                                            {{ credit.name }}
                                            <span *ngIf="paymentId === credit.id">
                                                <i class="fas fa-check"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        </mat-expansion-panel>
                        <mat-expansion-panel (opened)="panelOpenState = true"
                                             (closed)="panelOpenState = false"
                                             *ngIf="bankTransfers.length > 0">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Bank Transfer
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            
                            <div class="container">
                                <div class="row">
                                    <div class="col-12" *ngFor="let transfer of bankTransfers" (click)="chossePayment(transfer.id, transfer.name, transfer.cc)">
                                        <div class="list-payment">
                                            {{ transfer.name }}
                                            <span *ngIf="paymentId === transfer.id">
                                                <i class="fas fa-check"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>

                    <div class="button-payment-method">
                        <button mat-raised-button color="action" (click)="submitPaymentChannel()">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>